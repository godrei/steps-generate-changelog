title: Generate Changelog
summary: Genereates Changelog based on git commits
description: Genereates Changelog based on git commits.

website: https://github.com/bitrise-steplib/steps-generate-changelog
source_code_url: https://github.com/bitrise-steplib/steps-generate-changelog
support_url: https://github.com/bitrise-steplib/steps-generate-changelog/issues

type_tags:
  - utility

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

toolkit:
  go:
    package_name: github.com/bitrise-steplib/steps-generate-changelog

inputs:
  - new_version: $BITRISE_GIT_TAG
    opts:
      title: Next version
      summary: Next release version
      description: Next release version.
      is_required: true
  - changelog_pth: $BITRISE_DEPLOY_DIR/CHANGELOG.md
    opts:
      title: "Changelog path"
      summary: Changelog path
      description: Changelog path.
      is_required: true
  - release_config: |-
      release:
        development_branch: master
        release_branch: master
      changelog:
        path: CHANGELOG.md
        content_template: |-
          {{range .ContentItems}}### {{.EndTaggedCommit.Tag}} ({{.EndTaggedCommit.Date.Format "2006 Jan 02"}})

          {{range .Commits}}* [{{firstChars .Hash 7}}] {{.Message}}
          {{end}}
          {{end}}
        header_template: '## Changelog (Current version: {{.Version}})'
        footer_template: 'Updated: {{.CurrentDate.Format "2006 Jan 02"}}'
    opts:
      title: Release configurations
      summary: Release configurations
      description: Release configurations.
