title: Generate Changelog
summary: Genereates Changelog based on git commits
description: |-
  Genereates Changelog based on git commits.

  The step collects the commits from the latest tag to the latest commit on a given branch.

  Use the `Release configurations` input to describe your release process:

  ```
  release:
    development_branch: master # the changelog will built up by commits on this branch
  changelog:
    path: CHANGELOG.md # writes the changelog file to this path
    content_template: |- # changelog template, uses: [text/template](https://golang.org/pkg/text/template/) the template models: https://github.com/bitrise-tools/releaseman/blob/master/releaseman/changelog.go#L46
      {{range .ContentItems}}### {{.EndTaggedCommit.Tag}} ({{.EndTaggedCommit.Date.Format "2006 Jan 02"}})

      {{range .Commits}}* [{{firstChars .Hash 7}}] {{.Message}}
      {{end}}
      {{end}}
    header_template: '## Changelog (Current version: {{.Version}})' # the changelog new version's section's header template
    footer_template: 'Updated: {{.CurrentDate.Format "2006 Jan 02"}}' # the changelog new version's section's footer template
  ```

  The template generates changelog like this: ./CHANGELOG.md

website: https://github.com/godrei/steps-generate-changelog
source_code_url: https://github.com/godrei/steps-generate-changelog
support_url: https://github.com/godrei/steps-generate-changelog/issues

type_tags:
  - utility

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

toolkit:
  go:
    package_name: github.com/godrei/steps-generate-changelog

inputs:
  - new_version: $BITRISE_GIT_TAG
    opts:
      title: Next version
      summary: Next release version
      description: Next release version.
      is_required: true
  - changelog_pth: $BITRISE_DEPLOY_DIR/CHANGELOG.md
    opts:
      title: "Changelog path"
      summary: Changelog path
      description: Changelog path.
      is_required: true
  - release_config: |-
      release:
        development_branch: master
      changelog:
        path: CHANGELOG.md
        content_template: |-
          {{range .ContentItems}}### {{.EndTaggedCommit.Tag}} ({{.EndTaggedCommit.Date.Format "2006 Jan 02"}})

          {{range .Commits}}* [{{firstChars .Hash 7}}] {{.Message}}
          {{end}}
          {{end}}
        header_template: '## Changelog (Current version: {{.Version}})'
        footer_template: 'Updated: {{.CurrentDate.Format "2006 Jan 02"}}'
    opts:
      title: Release configurations
      summary: Release configurations
      description: Release configurations.
outputs:
  - BITRSE_CHANGELOG: 
    opts:
      title: Bitrise changelog content
      summary: Bitrise changelog content
